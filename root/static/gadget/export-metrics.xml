<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs
            title="Export metrics"
            author="brunofr"
            thumbnail="http://172.16.59.54:8000/static/img/longview_icon.png"
            screenshot="http://172.16.59.54:8000/static/img/longview_icon.png"
            description="A simple way to look the metrics of your projects, also provide support to export the results to your email."
            height="360">

        <Require feature="minimessage" />
        <Require feature="dynamic-height" />
        <Require feature="views" />

        <Optional feature="auth-refresh"/>
        <Require feature="oauthpopup"/>
        <OAuth>
            <Service>
                <Access url="__ATLASSIAN_BASE_URL__/plugins/servlet/oauth/access-token" method="POST"/>
                <Request url="__ATLASSIAN_BASE_URL__/plugins/servlet/oauth/request-token" method="POST"/>
                <Authorization url="__ATLASSIAN_BASE_URL__/plugins/servlet/oauth/authorize?oauth_callback=http%3A%2F%2Foauth.gmodules.com%2Fgadgets%2Foauthcallback"/>
            </Service>
        </OAuth>

    </ModulePrefs>

    <UserPref
            name="num_entries"
            display_name="Number of Entries:"
            default_value="5"/>

    <Content type="html" view="default,canvas">
        <![CDATA[
            <div id="main">
                <link rel="stylesheet" href="http://172.16.59.54:8000/static/css/style.css">
                <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

                <div layout="column" ng-app="Gadget" ng-controller="AppController as app" ng-cloak>
                    <md-toolbar class="md-hue-2">
                        <div class="md-toolbar-tools">
                            <img class="md-avatar" ng-src="//app.data.user.avatarUrls['24x24']//">
                            <h2>
                                <div>
                                    //app.data.user.displayName//
                                </div>
                            </h2>
                            <span flex></span>
                            <md-button ng-click="app.data.sendEmail()" class="md-icon-button" aria-label="Settings" ng-disabled="false">
                              <md-icon>mail</md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>

                    <div class="main-content" layout="column">
                        <div><span ng-bind="app.data.error"></span></div>

                        <md-content ng-controller="JiraCoreController" layout="column">
                            <md-input-container>
                                <label>Select board</label>
                                <md-select ng-model="selectBoard" ng-change="showBoardInfo()">
                                    <md-option ng-repeat="board in boards" ng-value="board">
                                        //board.name//
                                    </md-option>
                                </md-select>
                            </md-input-container>

                            <md-content class="md-padding" ng-hide="showmetrics">
                                <md-whiteframe class="md-whiteframe-2dp" flex layout-align="center center">
                                    <span>Select a board to show the metrics.</span>
                                </md-whiteframe>
                            </md-content>

                            <md-tabs md-dynamic-height md-border-bottom ng-if="showmetrics">
                                <md-tab label="Cost of Sprint">
                                    <md-content class="md-padding">
                                        <md-list>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Total time spend</p>
                                                </div>
                                                <p class="md-secondary">//metrics.cost.alltime//</p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Total of sprints</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.cost.sprintstotal//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-2-line">
                                                <div class="md-list-item-text">
                                                  <p>Cost of Sprint</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //(metrics.cost.alltime*125)/metrics.cost.sprintstotal//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                        </md-list>
                                    </md-content>
                                </md-tab>

                                <md-tab label="Failure load">
                                    <md-content class="md-padding">
                                        <md-list>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Total of bugs</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.failure.allbugs//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Completed bugs</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.failure.completedbugs//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-2-line">
                                                <div class="md-list-item-text">
                                                  <p>Result of Failure load</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //(metrics.failure.allbugs/metrics.failure.completedbugs)//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                        </md-list>
                                    </md-content>
                                </md-tab>

                                <md-tab label="Lead time">
                                    <md-content class="md-padding">
                                        <md-list>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Total of story</p>
                                                </div>
                                                <p class="md-secondary">//metrics.leadtime.allstory//</p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>Completed story</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.failure.completedstory//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-2-line">
                                                <div class="md-list-item-text">
                                                  <p>Cost of Sprint</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //(metrics.leadtime.allstory/metrics.failure.completedstory) | number:0//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                        </md-list>
                                    </md-content>
                                </md-tab>

                                <md-tab label="Relative Velocity">
                                    <md-content class="md-padding">
                                        <md-list>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>All story points completed (current sprint)</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.relativevelocity.storypointscurrent//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-1-line">
                                                <div class="md-list-item-text">
                                                  <p>All story points completed (1st sprint)</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //metrics.relativevelocity.storypointsfirst//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                            <md-list-item class="md-2-line">
                                                <div class="md-list-item-text">
                                                  <p>Relative Velocity Improvement</p>
                                                </div>
                                                <p class="md-secondary">
                                                    //(metrics.relativevelocity.storypointscurrent/metrics.relativevelocity.storypointsfirst)//
                                                </p>
                                                <md-divider ng-if="!$last"></md-divider>
                                            </md-list-item>
                                        </md-list>
                                    </md-content>
                                </md-tab>
                           </md-tabs>
                        </md-content>
                    </div>
                </div>

                <script src="http://172.16.59.54:8000/static/js/app.js"></script>
            </div>
        ]]>
    </Content>
</Module>